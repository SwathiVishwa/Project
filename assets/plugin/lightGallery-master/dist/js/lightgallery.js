/*! lightgallery - v1.3.9 - 2017-03-05
* http://sachinchoolur.github.io/lightGallery/
* Copyright (c) 2017 Sachin N; Licensed GPLv3 */
(function(d,c){if(typeof define==="function"&&define.amd){define(["jquery"],function(a){return(c(a))})}else{if(typeof exports==="object"){module.exports=c(require("jquery"))}else{c(d.jQuery)}}}(this,function(b){(function(){var d={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6000,useLeft:false,closable:true,loop:true,escKey:true,keyPress:true,controls:true,slideEndAnimatoin:true,hideControlOnEnd:false,mousewheel:true,getCaptionFromTitleOrAlt:true,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:false,preload:1,showAfterLoad:true,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:false,iframeMaxWidth:"100%",download:true,counter:true,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:true,enableDrag:true,dynamic:false,dynamicEl:[],galleryId:1};function a(c,f){this.el=c;this.$el=b(c);this.s=b.extend({},d,f);if(this.s.dynamic&&this.s.dynamicEl!=="undefined"&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length){throw ("When using dynamic mode, you must also define dynamicEl as an Array.")}this.modules={};this.lGalleryOn=false;this.lgBusy=false;this.hideBartimeout=false;this.isTouch=("ontouchstart" in document.documentElement);if(this.s.slideEndAnimatoin){this.s.hideControlOnEnd=false}if(this.s.dynamic){this.$items=this.s.dynamicEl}else{if(this.s.selector==="this"){this.$items=this.$el}else{if(this.s.selector!==""){if(this.s.selectWithin){this.$items=b(this.s.selectWithin).find(this.s.selector)}else{this.$items=this.$el.find(b(this.s.selector))}}else{this.$items=this.$el.children()}}}this.$slide="";this.$outer="";this.init();return this}a.prototype.init=function(){var c=this;if(c.s.preload>c.$items.length){c.s.preload=c.$items.length}var f=window.location.hash;if(f.indexOf("lg="+this.s.galleryId)>0){c.index=parseInt(f.split("&slide=")[1],10);b("body").addClass("lg-from-hash");if(!b("body").hasClass("lg-on")){setTimeout(function(){c.build(c.index)});b("body").addClass("lg-on")}}if(c.s.dynamic){c.$el.trigger("onBeforeOpen.lg");c.index=c.s.index||0;if(!b("body").hasClass("lg-on")){setTimeout(function(){c.build(c.index);b("body").addClass("lg-on")})}}else{c.$items.on("click.lgcustom",function(h){try{h.preventDefault();h.preventDefault()}catch(e){h.returnValue=false}c.$el.trigger("onBeforeOpen.lg");c.index=c.s.index||c.$items.index(this);if(!b("body").hasClass("lg-on")){c.build(c.index);b("body").addClass("lg-on")}})}};a.prototype.build=function(f){var c=this;c.structure();b.each(b.fn.lightGallery.modules,function(e){c.modules[e]=new b.fn.lightGallery.modules[e](c.el)});c.slide(f,false,false,false);if(c.s.keyPress){c.keyPress()}if(c.$items.length>1){c.arrow();setTimeout(function(){c.enableDrag();c.enableSwipe()},50);if(c.s.mousewheel){c.mousewheel()}}c.counter();c.closeGallery();c.$el.trigger("onAfterOpen.lg");c.$outer.on("mousemove.lg click.lg touchstart.lg",function(){c.$outer.removeClass("lg-hide-items");clearTimeout(c.hideBartimeout);c.hideBartimeout=setTimeout(function(){c.$outer.addClass("lg-hide-items")},c.s.hideBarsDelay)});c.$outer.trigger("mousemove.lg")};a.prototype.structure=function(){var l="";var p="";var o=0;var m="";var n;var c=this;b("body").append('<div class="lg-backdrop"></div>');b(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms");for(o=0;o<this.$items.length;o++){l+='<div class="lg-item"></div>'}if(this.s.controls&&this.$items.length>1){p='<div class="lg-actions"><div class="lg-prev lg-icon">'+this.s.prevHtml+'</div><div class="lg-next lg-icon">'+this.s.nextHtml+"</div></div>"}if(this.s.appendSubHtmlTo===".lg-sub-html"){m='<div class="lg-sub-html"></div>'}n='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+l+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+p+m+"</div></div>";b("body").append(n);this.$outer=b(".lg-outer");this.$slide=this.$outer.find(".lg-item");if(this.s.useLeft){this.$outer.addClass("lg-use-left");this.s.mode="lg-slide"}else{this.$outer.addClass("lg-use-css3")}c.setTop();b(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){c.setTop()},100)});this.$slide.eq(this.index).addClass("lg-current");if(this.doCss()){this.$outer.addClass("lg-css3")}else{this.$outer.addClass("lg-css");this.s.speed=0}this.$outer.addClass(this.s.mode);if(this.s.enableDrag&&this.$items.length>1){this.$outer.addClass("lg-grab")}if(this.s.showAfterLoad){this.$outer.addClass("lg-show-after-load")}if(this.doCss()){var i=this.$outer.find(".lg-inner");i.css("transition-timing-function",this.s.cssEasing);i.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){b(".lg-backdrop").addClass("in")});setTimeout(function(){c.$outer.addClass("lg-visible")},this.s.backdropDuration);if(this.s.download){this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>')}this.prevScrollTop=b(window).scrollTop()};a.prototype.setTop=function(){if(this.s.height!=="100%"){var h=b(window).height();var c=(h-parseInt(this.s.height,10))/2;var g=this.$outer.find(".lg");if(h>=parseInt(this.s.height,10)){g.css("top",c+"px")}else{g.css("top","0px")}}};a.prototype.doCss=function(){var c=function(){var h=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"];var j=document.documentElement;var i=0;for(i=0;i<h.length;i++){if(h[i] in j.style){return true}}};if(c()){return true}return false};a.prototype.isVideo=function(c,o){var m;if(this.s.dynamic){m=this.s.dynamicEl[o].html}else{m=this.$items.eq(o).attr("data-html")}if(!c&&m){return{html5:true}}var n=c.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i);var p=c.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var l=c.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i);var k=c.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);if(n){return{youtube:n}}else{if(p){return{vimeo:p}}else{if(l){return{dailymotion:l}}else{if(k){return{vk:k}}}}}};a.prototype.counter=function(){if(this.s.counter){b(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")}};a.prototype.addHtml=function(k){var i=null;var c;var l;if(this.s.dynamic){if(this.s.dynamicEl[k].subHtmlUrl){c=this.s.dynamicEl[k].subHtmlUrl}else{i=this.s.dynamicEl[k].subHtml}}else{l=this.$items.eq(k);if(l.attr("data-sub-html-url")){c=l.attr("data-sub-html-url")}else{i=l.attr("data-sub-html");if(this.s.getCaptionFromTitleOrAlt&&!i){i=l.attr("title")||l.find("img").first().attr("alt")}}}if(!c){if(typeof i!=="undefined"&&i!==null){var j=i.substring(0,1);if(j==="."||j==="#"){if(this.s.subHtmlSelectorRelative&&!this.s.dynamic){i=l.find(i).html()}else{i=b(i).html()}}}else{i=""}}if(this.s.appendSubHtmlTo===".lg-sub-html"){if(c){this.$outer.find(this.s.appendSubHtmlTo).load(c)}else{this.$outer.find(this.s.appendSubHtmlTo).html(i)}}else{if(c){this.$slide.eq(k).load(c)}else{this.$slide.eq(k).append(i)}}if(typeof i!=="undefined"&&i!==null){if(i===""){this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html")}else{this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")}}this.$el.trigger("onAfterAppendSubHtml.lg",[k])};a.prototype.preload=function(g){var c=1;var h=1;for(c=1;c<=this.s.preload;c++){if(c>=this.$items.length-g){break}this.loadContent(g+c,false,0)}for(h=1;h<=this.s.preload;h++){if(g-h<0){break}this.loadContent(g-h,false,0)}};a.prototype.loadContent=function(I,H,e){var B=this;var z=false;var c;var E;var w;var J;var C;var K;var D=function(g){var i=[];var f=[];for(var j=0;j<g.length;j++){var l=g[j].split(" ");if(l[0]===""){l.splice(0,1)}f.push(l[0]);i.push(l[1])}var k=b(window).width();for(var h=0;h<i.length;h++){if(parseInt(i[h],10)>k){E=f[h];break}}};if(B.s.dynamic){if(B.s.dynamicEl[I].poster){z=true;w=B.s.dynamicEl[I].poster}K=B.s.dynamicEl[I].html;E=B.s.dynamicEl[I].src;if(B.s.dynamicEl[I].responsive){var x=B.s.dynamicEl[I].responsive.split(",");D(x)}J=B.s.dynamicEl[I].srcset;C=B.s.dynamicEl[I].sizes}else{if(B.$items.eq(I).attr("data-poster")){z=true;w=B.$items.eq(I).attr("data-poster")}K=B.$items.eq(I).attr("data-html");E=B.$items.eq(I).attr("href")||B.$items.eq(I).attr("data-src");if(B.$items.eq(I).attr("data-responsive")){var G=B.$items.eq(I).attr("data-responsive").split(",");D(G)}J=B.$items.eq(I).attr("data-srcset");C=B.$items.eq(I).attr("data-sizes")}var F=false;if(B.s.dynamic){if(B.s.dynamicEl[I].iframe){F=true}}else{if(B.$items.eq(I).attr("data-iframe")==="true"){F=true}}var A=B.isVideo(E,I);if(!B.$slide.eq(I).hasClass("lg-loaded")){if(F){B.$slide.eq(I).prepend('<div class="lg-video-cont" style="max-width:'+B.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+E+'"  allowfullscreen="true"></iframe></div></div>')}else{if(z){var L="";if(A&&A.youtube){L="lg-has-youtube"}else{if(A&&A.vimeo){L="lg-has-vimeo"}else{L="lg-has-html5"}}B.$slide.eq(I).prepend('<div class="lg-video-cont '+L+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+w+'" /></div></div>')}else{if(A){B.$slide.eq(I).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>');B.$el.trigger("hasVideo.lg",[I,E,K])}else{B.$slide.eq(I).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+E+'" /></div>')}}}B.$el.trigger("onAferAppendSlide.lg",[I]);c=B.$slide.eq(I).find(".lg-object");if(C){c.attr("sizes",C)}if(J){c.attr("srcset",J);try{picturefill({elements:[c[0]]})}catch(y){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}if(this.s.appendSubHtmlTo!==".lg-sub-html"){B.addHtml(I)}B.$slide.eq(I).addClass("lg-loaded")}B.$slide.eq(I).find(".lg-object").on("load.lg error.lg",function(){var f=0;if(e&&!b("body").hasClass("lg-from-hash")){f=e}setTimeout(function(){B.$slide.eq(I).addClass("lg-complete");B.$el.trigger("onSlideItemLoad.lg",[I,e||0])},f)});if(A&&A.html5&&!z){B.$slide.eq(I).addClass("lg-complete")}if(H===true){if(!B.$slide.eq(I).hasClass("lg-complete")){B.$slide.eq(I).find(".lg-object").on("load.lg error.lg",function(){B.preload(I)})}else{B.preload(I)}}};a.prototype.slide=function(t,r,w,p){var v=this.$outer.find(".lg-current").index();var u=this;if(u.lGalleryOn&&(v===t)){return}var s=this.$slide.length;var c=u.lGalleryOn?this.s.speed:0;if(!u.lgBusy){if(this.s.download){var x;if(u.s.dynamic){x=u.s.dynamicEl[t].downloadUrl!==false&&(u.s.dynamicEl[t].downloadUrl||u.s.dynamicEl[t].src)}else{x=u.$items.eq(t).attr("data-download-url")!=="false"&&(u.$items.eq(t).attr("data-download-url")||u.$items.eq(t).attr("href")||u.$items.eq(t).attr("data-src"))}if(x){b("#lg-download").attr("href",x);u.$outer.removeClass("lg-hide-download")}else{u.$outer.addClass("lg-hide-download")}}this.$el.trigger("onBeforeSlide.lg",[v,t,r,w]);u.lgBusy=true;clearTimeout(u.hideBartimeout);if(this.s.appendSubHtmlTo===".lg-sub-html"){setTimeout(function(){u.addHtml(t)},c)}this.arrowDisable(t);if(!p){if(t<v){p="prev"}else{if(t>v){p="next"}}}if(!r){u.$outer.addClass("lg-no-trans");this.$slide.removeClass("lg-prev-slide lg-next-slide");if(p==="prev"){this.$slide.eq(t).addClass("lg-prev-slide");this.$slide.eq(v).addClass("lg-next-slide")}else{this.$slide.eq(t).addClass("lg-next-slide");this.$slide.eq(v).addClass("lg-prev-slide")}setTimeout(function(){u.$slide.removeClass("lg-current");u.$slide.eq(t).addClass("lg-current");u.$outer.removeClass("lg-no-trans")},50)}else{this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");var q;var o;if(s>2){q=t-1;o=t+1;if((t===0)&&(v===s-1)){o=0;q=s-1}else{if((t===s-1)&&(v===0)){o=0;q=s-1}}}else{q=0;o=1}if(p==="prev"){u.$slide.eq(o).addClass("lg-next-slide")}else{u.$slide.eq(q).addClass("lg-prev-slide")}u.$slide.eq(t).addClass("lg-current")}if(u.lGalleryOn){setTimeout(function(){u.loadContent(t,true,0)},this.s.speed+50);setTimeout(function(){u.lgBusy=false;u.$el.trigger("onAfterSlide.lg",[v,t,r,w])},this.s.speed)}else{u.loadContent(t,true,u.s.backdropDuration);u.lgBusy=false;u.$el.trigger("onAfterSlide.lg",[v,t,r,w])}u.lGalleryOn=true;if(this.s.counter){b("#lg-counter-current").text(t+1)}}};a.prototype.goToNextSlide=function(h){var c=this;var g=c.s.loop;if(h&&c.$slide.length<3){g=false}if(!c.lgBusy){if((c.index+1)<c.$slide.length){c.index++;c.$el.trigger("onBeforeNextSlide.lg",[c.index]);c.slide(c.index,h,false,"next")}else{if(g){c.index=0;c.$el.trigger("onBeforeNextSlide.lg",[c.index]);c.slide(c.index,h,false,"next")}else{if(c.s.slideEndAnimatoin&&!h){c.$outer.addClass("lg-right-end");setTimeout(function(){c.$outer.removeClass("lg-right-end")},400)}}}}};a.prototype.goToPrevSlide=function(h){var c=this;var g=c.s.loop;if(h&&c.$slide.length<3){g=false}if(!c.lgBusy){if(c.index>0){c.index--;c.$el.trigger("onBeforePrevSlide.lg",[c.index,h]);c.slide(c.index,h,false,"prev")}else{if(g){c.index=c.$items.length-1;c.$el.trigger("onBeforePrevSlide.lg",[c.index,h]);c.slide(c.index,h,false,"prev")}else{if(c.s.slideEndAnimatoin&&!h){c.$outer.addClass("lg-left-end");setTimeout(function(){c.$outer.removeClass("lg-left-end")},400)}}}}};a.prototype.keyPress=function(){var c=this;if(this.$items.length>1){b(window).on("keyup.lg",function(e){if(c.$items.length>1){if(e.keyCode===37){e.preventDefault();c.goToPrevSlide()}if(e.keyCode===39){e.preventDefault();c.goToNextSlide()}}})}b(window).on("keydown.lg",function(e){if(c.s.escKey===true&&e.keyCode===27){e.preventDefault();if(!c.$outer.hasClass("lg-thumb-open")){c.destroy()}else{c.$outer.removeClass("lg-thumb-open")}}})};a.prototype.arrow=function(){var c=this;this.$outer.find(".lg-prev").on("click.lg",function(){c.goToPrevSlide()});this.$outer.find(".lg-next").on("click.lg",function(){c.goToNextSlide()})};a.prototype.arrowDisable=function(c){if(!this.s.loop&&this.s.hideControlOnEnd){if((c+1)<this.$slide.length){this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled")}if(c>0){this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled")}else{this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled")}}};a.prototype.setTranslate=function(g,c,h){if(this.s.useLeft){g.css("left",c)}else{g.css({transform:"translate3d("+(c)+"px, "+h+"px, 0px)"})}};a.prototype.touchMove=function(g,h){var c=h-g;if(Math.abs(c)>15){this.$outer.addClass("lg-dragging");this.setTranslate(this.$slide.eq(this.index),c,0);this.setTranslate(b(".lg-prev-slide"),-this.$slide.eq(this.index).width()+c,0);this.setTranslate(b(".lg-next-slide"),this.$slide.eq(this.index).width()+c,0)}};a.prototype.touchEnd=function(c){var f=this;if(f.s.mode!=="lg-slide"){f.$outer.addClass("lg-slide")}this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0");setTimeout(function(){f.$outer.removeClass("lg-dragging");if((c<0)&&(Math.abs(c)>f.s.swipeThreshold)){f.goToNextSlide(true)}else{if((c>0)&&(Math.abs(c)>f.s.swipeThreshold)){f.goToPrevSlide(true)}else{if(Math.abs(c)<5){f.$el.trigger("onSlideClick.lg")}}}f.$slide.removeAttr("style")});setTimeout(function(){if(!f.$outer.hasClass("lg-dragging")&&f.s.mode!=="lg-slide"){f.$outer.removeClass("lg-slide")}},f.s.speed+100)};a.prototype.enableSwipe=function(){var c=this;var h=0;var j=0;var i=false;if(c.s.enableSwipe&&c.isTouch&&c.doCss()){c.$slide.on("touchstart.lg",function(e){if(!c.$outer.hasClass("lg-zoomed")&&!c.lgBusy){e.preventDefault();c.manageSwipeClass();h=e.originalEvent.targetTouches[0].pageX}});c.$slide.on("touchmove.lg",function(e){if(!c.$outer.hasClass("lg-zoomed")){e.preventDefault();j=e.originalEvent.targetTouches[0].pageX;c.touchMove(h,j);i=true}});c.$slide.on("touchend.lg",function(){if(!c.$outer.hasClass("lg-zoomed")){if(i){i=false;c.touchEnd(j-h)}else{c.$el.trigger("onSlideClick.lg")}}})}};a.prototype.enableDrag=function(){var c=this;var i=0;var k=0;var l=false;var j=false;if(c.s.enableDrag&&!c.isTouch&&c.doCss()){c.$slide.on("mousedown.lg",function(e){if(!c.$outer.hasClass("lg-zoomed")){if(b(e.target).hasClass("lg-object")||b(e.target).hasClass("lg-video-play")){e.preventDefault();if(!c.lgBusy){c.manageSwipeClass();i=e.pageX;l=true;c.$outer.scrollLeft+=1;c.$outer.scrollLeft-=1;c.$outer.removeClass("lg-grab").addClass("lg-grabbing");c.$el.trigger("onDragstart.lg")}}}});b(window).on("mousemove.lg",function(e){if(l){j=true;k=e.pageX;c.touchMove(i,k);c.$el.trigger("onDragmove.lg")}});b(window).on("mouseup.lg",function(e){if(j){j=false;c.touchEnd(k-i);c.$el.trigger("onDragend.lg")}else{if(b(e.target).hasClass("lg-object")||b(e.target).hasClass("lg-video-play")){c.$el.trigger("onSlideClick.lg")}}if(l){l=false;c.$outer.removeClass("lg-grabbing").addClass("lg-grab")}})}};a.prototype.manageSwipeClass=function(){var f=this.index+1;var c=this.index-1;if(this.s.loop&&this.$slide.length>2){if(this.index===0){c=this.$slide.length-1}else{if(this.index===this.$slide.length-1){f=0}}}this.$slide.removeClass("lg-next-slide lg-prev-slide");if(c>-1){this.$slide.eq(c).addClass("lg-prev-slide")}this.$slide.eq(f).addClass("lg-next-slide")};a.prototype.mousewheel=function(){var c=this;c.$outer.on("mousewheel.lg",function(e){if(!e.deltaY){return}if(e.deltaY>0){c.goToPrevSlide()}else{c.goToNextSlide()}e.preventDefault()})};a.prototype.closeGallery=function(){var c=this;var f=false;this.$outer.find(".lg-close").on("click.lg",function(){c.destroy()});if(c.s.closable){c.$outer.on("mousedown.lg",function(e){if(b(e.target).is(".lg-outer")||b(e.target).is(".lg-item ")||b(e.target).is(".lg-img-wrap")){f=true}else{f=false}});c.$outer.on("mouseup.lg",function(e){if(b(e.target).is(".lg-outer")||b(e.target).is(".lg-item ")||b(e.target).is(".lg-img-wrap")&&f){if(!c.$outer.hasClass("lg-dragging")){c.destroy()}}})}};a.prototype.destroy=function(g){var c=this;if(!g){c.$el.trigger("onBeforeClose.lg");b(window).scrollTop(c.prevScrollTop)}if(g){if(!c.s.dynamic){this.$items.off("click.lg click.lgcustom")}b.removeData(c.el,"lightGallery")}this.$el.off(".lg.tm");b.each(b.fn.lightGallery.modules,function(e){if(c.modules[e]){c.modules[e].destroy()}});this.lGalleryOn=false;clearTimeout(c.hideBartimeout);this.hideBartimeout=false;b(window).off(".lg");b("body").removeClass("lg-on lg-from-hash");if(c.$outer){c.$outer.removeClass("lg-visible")}b(".lg-backdrop").removeClass("in");setTimeout(function(){if(c.$outer){c.$outer.remove()}b(".lg-backdrop").remove();if(!g){c.$el.trigger("onCloseAfter.lg")}},c.s.backdropDuration+50)};b.fn.lightGallery=function(c){return this.each(function(){if(!b.data(this,"lightGallery")){b.data(this,"lightGallery",new a(this,c))}else{try{b(this).data("lightGallery").init()}catch(f){console.error("lightGallery has not initiated properly")}}})};b.fn.lightGallery.modules={}})()}));